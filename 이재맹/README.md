
# COâ‚‚ ë†ë„ ì¸¡ì • ë° ê²½ê³  ì‹œìŠ¤í…œ

ì´ í”„ë¡œì íŠ¸ëŠ” ì°¨ëŸ‰ ë‚´ë¶€ì˜ COâ‚‚ ë†ë„ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§í•˜ì—¬ ì¡¸ìŒ ìš´ì „ ìœ„í—˜ì„±ì„ ì¤„ì´ê³ , ì‹¤ë‚´ ê³µê¸°ì§ˆì„ ê°œì„ í•˜ê¸° ìœ„í•´ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤. Zigbee í†µì‹ ì„ í™œìš©í•´ ì„¼ì„œ ë°ì´í„°ë¥¼ ì•ˆì •ì ìœ¼ë¡œ ìˆ˜ì§‘í•˜ë©°, Raspberry Pië¥¼ í†µí•´ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ê³  ìŒì„± ê²½ê³ ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

## ğŸ“‹ ì£¼ìš” ê¸°ëŠ¥

- **ì´ì‚°í™”íƒ„ì†Œ ë†ë„ ì¸¡ì •**: ì°¨ëŸ‰ ë‚´ë¶€ì˜ COâ‚‚ ë†ë„ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ê°ì§€í•˜ê³ , ì„ê³„ê°’ ì´ˆê³¼ ì‹œ ê²½ê³ ë¥¼ ì œê³µí•©ë‹ˆë‹¤.
- **ìŒì„± ê²½ê³  ì‹œìŠ¤í…œ**: ì„¤ì •ëœ ì„ê³„ê°’ì„ ì´ˆê³¼í•  ê²½ìš° ìŒì„± ë©”ì‹œì§€ë¥¼ í†µí•´ ì¦‰ê°ì ì¸ í™˜ê¸° ì•Œë¦¼ì„ ì œê³µí•©ë‹ˆë‹¤.
- **Zigbee ë°ì´í„° ì „ì†¡**: ì„¼ì„œ ë°ì´í„°ë¥¼ Zigbee í†µì‹ ì„ í†µí•´ Raspberry Pië¡œ ì „ì†¡í•˜ì—¬ ì•ˆì •ì ì´ê³  íš¨ìœ¨ì ì¸ ë°ì´í„° íë¦„ì„ ë³´ì¥í•©ë‹ˆë‹¤.
- **ì‹¤ì‹œê°„ ë°ì´í„° ì²˜ë¦¬**: Raspberry Piì—ì„œ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ì—¬ COâ‚‚ ë†ë„ê°€ ìœ„í—˜ ìˆ˜ì¤€ì— ë„ë‹¬í–ˆëŠ”ì§€ íŒë‹¨í•˜ê³ , ì¦‰ê° ê²½ê³  ë©”ì‹œì§€ë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤.

## ğŸ“Š ë°ì´í„° íë¦„

![ë°ì´í„° íë¦„ ë‹¤ì´ì–´ê·¸ë¨](https://github.com/user-attachments/assets/6dd596ab-ffda-4691-8f16-840387ed6b95)

1. **ë°ì´í„° ìˆ˜ì§‘**: COâ‚‚ ì„¼ì„œê°€ Zigbee ë„¤íŠ¸ì›Œí¬ë¥¼ í†µí•´ ë°ì´í„°ë¥¼ Raspberry Pië¡œ ì „ì†¡í•©ë‹ˆë‹¤.
2. **ë°ì´í„° ì²˜ë¦¬**: Raspberry Piì—ì„œ ìˆ˜ì‹ í•œ ë°ì´í„°ë¥¼ ppm ë‹¨ìœ„ë¡œ ë³€í™˜í•˜ê³ , ì„ê³„ê°’ ì´ˆê³¼ ì—¬ë¶€ë¥¼ ë¶„ì„í•©ë‹ˆë‹¤.
3. **ê²½ê³  ì•Œë¦¼**: COâ‚‚ ë†ë„ê°€ ì„¤ì •ëœ ì„ê³„ê°’ì„ ì´ˆê³¼í•˜ë©´ "ì´ì‚°í™”íƒ„ì†Œ ë†ë„ê°€ ë†’ìŠµë‹ˆë‹¤. ì¦‰ì‹œ í™˜ê¸°ê°€ í•„ìš”í•©ë‹ˆë‹¤."ë¼ëŠ” ìŒì„± ë©”ì‹œì§€ê°€ ì¶œë ¥ë©ë‹ˆë‹¤.

## ğŸ“– ì½”ë“œ ì„¤ëª…

### TinyOSì™€ì˜ í†µì‹  (tos ëª¨ë“ˆ)
-  TinyOSëŠ” ì„¼ì„œ ë„¤íŠ¸ì›Œí¬ë¥¼ ìœ„í•œ ìš´ì˜ ì²´ì œë¡œ, ë³¸ í”„ë¡œì íŠ¸ì—ì„œëŠ” Raspberry Piì™€ COâ‚‚ ì„¼ì„œ ê°„ì˜ ë°ì´í„° í†µì‹ ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.
-  `tos` ëª¨ë“ˆì„ í†µí•´ Zigbee í”„ë¡œí† ì½œì„ ì‚¬ìš©í•˜ì—¬ Raspberry Piì™€ ì„¼ì„œ ê°„ì— ë°ì´í„°ë¥¼ ì•ˆì „í•˜ê³  ì‹ ë¢°ì„± ìˆê²Œ ì „ì†¡í•©ë‹ˆë‹¤. ì´ ëª¨ë“ˆì€ ì„¼ì„œì—ì„œ ìˆ˜ì§‘ëœ ë°ì´í„° íŒ¨í‚·ì„ Raspberry Pië¡œ ì „ì†¡í•˜ëŠ” ë° í•„ìˆ˜ì ì…ë‹ˆë‹¤.

    ```python
    import tos
    am = tos.AM()


### ë°ì´í„° íŒ¨í‚· ì²˜ë¦¬ (OscilloscopeMsg í´ë˜ìŠ¤) 
- ìˆ˜ì‹ ëœ ë°ì´í„°ë¥¼ êµ¬ì¡°í™”í•˜ê³ , ê° ì„¼ì„œ ë°ì´í„° í¬ì¸íŠ¸ë¥¼ ì ì ˆíˆ íŒŒì‹±í•˜ì—¬ COâ‚‚ ë†ë„ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤.
- OscilloscopeMsg í´ë˜ìŠ¤ëŠ” TinyOS íŒ¨í‚· êµ¬ì¡°ë¥¼ ì •ì˜í•˜ë©°, ì„¼ì„œ ë°ì´í„°ë¥¼ ë‹¤ë£¨ëŠ” í•„ë“œë¥¼ í¬í•¨í•©ë‹ˆë‹¤. ì´ í´ë˜ìŠ¤ë¥¼ í†µí•´ ì„¼ì„œ ë°ì´í„°ì˜ COâ‚‚ ë†ë„ë¥¼ ì¶”ì¶œí•˜ê³ , í•„ìš”í•œ ê²½ìš° ê²½ê³  ë¡œì§ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.

    ```python
    class OscilloscopeMsg(tos.Packet):
        def __init__(self, packet=None):
            tos.Packet.__init__(self,
                                [('srcID', 'int', 2),
                                 ('seqNo', 'int', 4),
                                 ('type', 'int', 2),
                                 ('Data0', 'int', 2)],  # COâ‚‚ ë°ì´í„° í•„ë“œ
                                packet)

### COâ‚‚ ë†ë„ ê³„ì‚°
- ì„¼ì„œë¡œë¶€í„°ì˜ COâ‚‚ ì¸¡ì •ê°’ì€ ì•„ë‚ ë¡œê·¸ ì‹ í˜¸ë¡œ ì¶œë ¥ë˜ë©°, ì´ë¥¼ ë””ì§€í„¸ ê°’ìœ¼ë¡œ ë³€í™˜í•˜ì—¬ ì²˜ë¦¬í•©ë‹ˆë‹¤. ì´ ë³€í™˜ ê³¼ì •ì—ì„œ ì‚¬ìš©ëœ ê³„ì‚°ì‹ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:
    ```python
    CO2 = 1.5 * CO2 / 4096 * 2 * 1000  # ë°ì´í„° ë³€í™˜ (ppm)

- ê³„ì‚°ì‹ì˜ ì„¸ë¶€ ìš”ì†Œ:
    - ì›ì‹œ ë°ì´í„° (CO2): ì„¼ì„œì—ì„œ ì¸¡ì •ëœ COâ‚‚ ë†ë„ì˜ ì›ì‹œ ì•„ë‚ ë¡œê·¸ ì‹ í˜¸ë¥¼ ADCë¥¼ í†µí•´ ë³€í™˜í•œ ë””ì§€í„¸ ê°’ì…ë‹ˆë‹¤.
    - ë¶„ëª¨ì˜ 4096: 12ë¹„íŠ¸ ADCì˜ ìµœëŒ€ ë¶„í•´ëŠ¥ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.
    - ê³„ìˆ˜ 1.5ì™€ 2:
        - 1.5: ì„¼ì„œì˜ ìµœëŒ€ ê°ì§€ ê°€ëŠ¥ COâ‚‚ ë†ë„ë¥¼ ì¡°ì •í•©ë‹ˆë‹¤.
        - 2: ì¸¡ì • ë²”ìœ„ë¥¼ í™•ì¥í•˜ì—¬ ë” ë†’ì€ ë†ë„ë¥¼ ì¸¡ì •í•  ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤.
    - 1000ì˜ ê³±ì…ˆ: ìµœì¢… ê°’ì„ ppm ë‹¨ìœ„ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.


### ìŒì„± ì¶œë ¥ (pyttsx3 ëª¨ë“ˆ)
  - pyttsx3ëŠ” Pythonì—ì„œ ì‘ë™í•˜ëŠ” í…ìŠ¤íŠ¸-íˆ¬-ìŠ¤í”¼ì¹˜ ë³€í™˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ, COâ‚‚ ë†ë„ê°€ ì„ê³„ê°’ì„ ì´ˆê³¼í•  ë•Œ ì‚¬ìš©ìì—ê²Œ ì¦‰ê°ì ì¸ ìŒì„± ê²½ê³ ë¥¼ ì œê³µí•©ë‹ˆë‹¤.
  - ì´ ëª¨ë“ˆì„ ì´ˆê¸°í™”í•˜ê³ , ìŒì„± ì†ë„ ë° ì–¸ì–´ ì„¤ì •ì„ í•œêµ­ì–´ë¡œ ì¡°ì •í•˜ì—¬ ê²½ê³  ë©”ì‹œì§€ë¥¼ ëª…í™•í•˜ê²Œ ì „ë‹¬í•©ë‹ˆë‹¤.
      ```python
         import pyttsx3
         engine = pyttsx3.init()
         engine.setProperty('rate', 200)        #ìŒì„± ë©”ì‹œì§€ì˜ ì†ë„ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.(ê¸°ë³¸ ì†ë„ 200)
         engine.setProperty('voice', 'korean')  #ì¶œë ¥ë  ìŒì„± ë©”ì‹œì§€ì˜ ì–¸ì–´ë¥¼ í•œêµ­ì–´ë¡œ ì„¤ì •í•©ë‹ˆë‹¤.
  

### ë°ì´í„° ìˆ˜ì‹  ë° ê²½ê³ 
- êµ¬í˜„: am.read() í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„° ìˆ˜ì‹ ì´ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤. ìˆ˜ì‹ ëœ ë°ì´í„°ëŠ” OscilloscopeMsg í˜•íƒœë¡œ ë³€í™˜ë˜ì–´ COâ‚‚ ë†ë„ë¥¼ ë¶„ì„í•©ë‹ˆë‹¤. COâ‚‚ ë†ë„ê°€ ì„¤ì •ëœ ì„ê³„ê°’ì„ ì´ˆê³¼í•˜ë©´, engine.say() í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ê²½ê³  ë©”ì‹œì§€ë¥¼ ìŒì„±ìœ¼ë¡œ ì¶œë ¥í•©ë‹ˆë‹¤. ìŒì„± ì¶œë ¥ì€ engine.runAndWait()ë¥¼ í†µí•´ ì‹¤í–‰ë©ë‹ˆë‹¤.
- `CO2_THRESHOLD`: ì´ ë³€ìˆ˜ëŠ” COâ‚‚ ë†ë„ì— ëŒ€í•œ ì„ê³„ê°’ì„ ppm ë‹¨ìœ„ë¡œ ì„¤ì •í•©ë‹ˆë‹¤. ê¸°ë³¸ê°’ì€ 1000 ppmì…ë‹ˆë‹¤. í™˜ê²½ì— ë”°ë¼ ì´ ê°’ì„ ì¡°ì •í•˜ì—¬ ë” ë¯¼ê°í•˜ê±°ë‚˜ ëœ ë¯¼ê°í•œ ê²½ê³ ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    ```python
     try:
    print("ë°ì´í„° ìˆ˜ì‹ ì„ ì‹œì‘í•©ë‹ˆë‹¤...")
    while True:
        p = am.read()  # íŒ¨í‚· ì½ê¸°
        if p:
            msg = OscilloscopeMsg(p.data)
            if msg.type == 1:  # CO2 ë°ì´í„° íƒ€ì… í™•ì¸
                CO2 = msg.Data0
                CO2 = 1.5 * CO2 / 4096 * 2 * 1000  # ë°ì´í„° ë³€í™˜ (ppm ê¸°ì¤€)
                print(f"{datetime.datetime.now()} - CO2: {CO2:.2f} ppm")
                if CO2 > CO2_THRESHOLD:
                    print("ê²½ê³ : COâ‚‚ ë†ë„ê°€ ì„ê³„ê°’ì„ ì´ˆê³¼í–ˆìŠµë‹ˆë‹¤! ì¦‰ì‹œ í™˜ê¸°ê°€ í•„ìš”í•©ë‹ˆë‹¤!")
                    engine.say("ì´ì‚°í™”íƒ„ì†Œ ë†ë„ê°€ ë†’ìŠµë‹ˆë‹¤. ì¦‰ì‹œ í™˜ê¸°ê°€ í•„ìš”í•©ë‹ˆë‹¤.")
                    engine.runAndWait()
    except KeyboardInterrupt:
        print("í”„ë¡œê·¸ë¨ì´ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.")
    except Exception as e:
        print(f"ì˜¤ë¥˜ ë°œìƒ: {e}")




## ğŸš€ ì‹¤í–‰ ë°©ë²•

1. **Raspberry Pi ì„¤ì •**
   - í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤: 
   - TinyOS ì„¤ì¹˜ ê°€ì´ë“œë¥¼ ì°¸ê³ í•˜ì„¸ìš”.([TinyOS Official Website](http://tinyos.stanford.edu/tinyos-wiki/index.php/TinyOS_Documentation_Wiki))
     ```bash
     pip install pyttsx3
     ```

2. **ì¥ë¹„ ì—°ê²°**
   - COâ‚‚ ì„¼ì„œë¥¼ Zigbee ëª¨ë“ˆê³¼ ì—°ê²°í•©ë‹ˆë‹¤.
   - Zigbee ëª¨ë“ˆì„ Raspberry Piì˜ USB í¬íŠ¸ì— ì—°ê²°í•©ë‹ˆë‹¤.

3. **ì½”ë“œ ì‹¤í–‰**
   - ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤:
     ```bash
     python co2_detect.py serial@/dev/ttyUSB0:115200
     ```

4. **ì‹œìŠ¤í…œ ì‘ë™ í™•ì¸**
   - COâ‚‚ ë†ë„ê°€ ì‹¤ì‹œê°„ìœ¼ë¡œ ì¶œë ¥ë©ë‹ˆë‹¤.
   - ì„ê³„ê°’ ì´ˆê³¼ ì‹œ ìŒì„± ê²½ê³  ë©”ì‹œì§€ê°€ ì¶œë ¥ë©ë‹ˆë‹¤.
  
## í…ŒìŠ¤íŠ¸ ì˜ìƒ
[![í…ŒìŠ¤íŠ¸ ì˜ìƒ](https://example.com/path/to/thumbnail.jpg)](https://photos.onedrive.com/share/0D986CDA029689A1!sabebe9e726e640689f1b8fedf1a4e9f8?cid=0D986CDA029689A1&resId=0D986CDA029689A1!sabebe9e726e640689f1b8fedf1a4e9f8&ithint=video&e=4%3aQNL5Go&sharingv2=true&fromShare=true&at=9&migratedtospo=true&redeem=aHR0cHM6Ly8xZHJ2Lm1zL3YvYy8wZDk4NmNkYTAyOTY4OWExL0VlZnA2NnZtSm1oQW54dVA3ZkdrNmZnQmV1Q0ZvWDJIRzc4TXUzdjVTbHYzTVE_ZT00OlFOTDVHbyZzaGFyaW5ndjI9dHJ1ZSZmcm9tU2hhcmU9dHJ1ZSZhdD05 "Video Title on OneDrive")
